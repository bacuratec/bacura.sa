# Story 1.2: Hydration Lang/Dir Consistency

## Status
InProgress

## Story
**As a** user,
**I want** the page language and direction to be correct at first paint,
**so that** I avoid hydration warnings and layout flicker.

## Acceptance Criteria
1. لا تظهر تحذيرات hydration في الكونسول بسبب اختلاف `dir/lang`
2. يتم تعيين `dir` و`lang` قبل أول تلوين عبر مكون مسؤول
3. لا يوجد وميض في الاتجاه عند التبديل الأولي للغة
4. تعتمد القيمة الأولية للغة على `localStorage` أو القيمة الافتراضية بشكل صحيح

## Tasks / Subtasks
- [x] ضمان تهيئة i18n قبل العرض عبر `app/providers.jsx`
- [x] ضبط `dir/lang` على `html` مباشرة عبر مكون client خفيف
- [x] مراجعة `app/layout.jsx` للتأكد من أن الضبط الديناميكي يغطي الحالات
- [ ] اختبار يدوي لتبديل اللغة والتأكد من عدم وجود تحذيرات

## Dev Notes
- `app/providers.jsx`: يحمّل i18n مبكرًا
- `src/components/shared/DirManager.jsx`: يزامن `dir/lang` مع اللغة
- `src/context/LanguageContext.jsx`: يخزّن ويسترجع اللغة من `localStorage`

### Testing
- افتح الصفحة، راقب الكونسول لأي تحذيرات hydration
- بدّل بين `ar` و`en` وتحقق من الاتجاه والنص

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-29 | 0.1 | Initial story draft | Dev Team |

## Dev Agent Record
### Agent Model Used
GPT-5-medium (Trae)

### Debug Log References
`.ai/debug-log.md`

### Completion Notes List
- N/A

### File List
- `app/layout.jsx`
- `app/providers.jsx`
- `src/lib/i18n.js`
- `src/components/shared/DirManager.jsx`

## QA Results
- Pending
